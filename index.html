<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Editor</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>

    <h1>eBay Description Editor</h1>

    <div class="product-text-section">
    <div class="product-text-container">
        <textarea class="product-title" id="product-title" placeholder="Product Name"></textarea>
        <textarea class="product-text" id="product-text" placeholder="Product Description"></textarea>
    </div>
    </div>
    <div class="btn-container">
        <button id="add-product">+</button>
        <button id="remove-product">-</button>
    </div>

    <div class="dnd-container">
        <div class="img-container">
            <div class="drop-target" id="dropTarget">Drop Image Here</div>
            <input type="text" id="img-url" placeholder="Image URL" hidden>
            <input type="text" id="img-description" placeholder="Product Name">
            <input type="text" id="img-link" placeholder="Product Link">
            <button id="clear-img">CLEAR</button>
        </div>

        <div class="img-container">
            <div class="drop-target" id="dropTarget">Drop Image Here</div>
            <input type="text" id="img-url" placeholder="Image URL" hidden>
            <input type="text" id="img-description" placeholder="Product Name">
            <input type="text" id="img-link" placeholder="Product Link">
            <button id="clear-img">CLEAR</button>
        </div>

        <div class="img-container">
            <div class="drop-target" id="dropTarget">Drop Image Here</div>
            <input type="text" id="img-url" placeholder="Image URL" hidden>
            <input type="text" id="img-description" placeholder="Product Name">
            <input type="text" id="img-link" placeholder="Product Link">
            <button id="clear-img">CLEAR</button>
        </div>

        <div class="img-container">
            <div class="drop-target" id="dropTarget">Drop Image Here</div>
            <input type="text" id="img-url" placeholder="Image URL" hidden>
            <input type="text" id="img-description" placeholder="Product Name">
            <input type="text" id="img-link" placeholder="Product Link">
            <button id="clear-img">CLEAR</button>
        </div>
    </div>

    <div class="btn-container">
        <button onclick="saveChanges()">Save & Copy</button>
    </div>
    

    
    <script>

    // Product description button control
    document.addEventListener("DOMContentLoaded", function(){
        const section = document.querySelector(".product-text-section");
        const addButton = document.getElementById("add-product");
        const removeButton = document.getElementById("remove-product");

        addButton.addEventListener("click", function(){

            // create a new product text container
            const newProductTextContainer = document.createElement("div");
            newProductTextContainer.classList.add("product-text-container");

            const titleTextarea = document.createElement("textarea");
            titleTextarea.classList.add("product-title");
            titleTextarea.placeholder = "Product Name";

            const descriptionTextarea = document.createElement("textarea");
            descriptionTextarea.classList.add("product-text");
            descriptionTextarea.placeholder = "Product Description";

            newProductTextContainer.appendChild(titleTextarea);
            newProductTextContainer.appendChild(descriptionTextarea);

            section.appendChild(newProductTextContainer);
    });

        removeButton.addEventListener("click", function(){
            const containers = section.querySelectorAll(".product-text-container");

            if (containers.length > 1){
                containers[containers.length - 1].remove();
            }
        })
    })

    //image drag and drop
    document.addEventListener("DOMContentLoaded", function () {
    const dropTargets = document.querySelectorAll(".drop-target");

    dropTargets.forEach((dropTarget) => {
        dropTarget.addEventListener("dragover", function (e) {
            e.preventDefault();
            dropTarget.style.backgroundColor = "#ddd";
        });

        dropTarget.addEventListener("dragleave", function () {
            dropTarget.style.backgroundColor = "";
        });

        dropTarget.addEventListener("drop", function (e) {
            e.preventDefault();
            dropTarget.style.backgroundColor = "";

            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith("image/")) {
                const reader = new FileReader();
                reader.onload = function (event) {
                    const imgURL = event.target.result;
                    
                    // Create an image preview inside the drop target
                    dropTarget.innerHTML = `<img src="${imgURL}" alt="Dropped Image" style="width: 100%; height: 100%; object-fit: cover;">`;
                    
                    // Store the image URL in the hidden input field
                    const imgURLInput = dropTarget.parentElement.querySelector("#img-url");
                    imgURLInput.value = imgURL;
                };
                reader.readAsDataURL(file);
            } else {
                alert("Please drop a valid image file.");
            }
        });
    });
});
    </script>

</body>
</html>
